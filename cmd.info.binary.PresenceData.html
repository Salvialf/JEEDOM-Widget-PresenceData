<div style="min-width:200px;min-height:100%;padding:5px;" class="cmd #history# tooltips cmd-widget" data-type="info" data-subtype="binary" data-cmd_id="#id#" data-cmd_uid="#uid#" data-version="#version#" title="#collectDate#">
<!--//<span class="cmdName" style="font-weight:bold;font-size:14px;#hideCmdName#">#name_display#</span>-->
	<div style="width:40%;float:left;" class="iconCmd#uid#"></div>
    <div style="font-family:system-ui;font-size:14px;font-weight:bold;margin-left:40%;padding:3px 0 5px;" class="datecmd#uid#"></div>
    <span class="timeCmd#uid# label" style="background-color:#cmdColor#!important;"></span>
	<script>
		jeedom.cmd.update['#id#'] = function(_options){
        $('.cmd[data-cmd_id=#id#]').attr('title','Valeur du '+_options.valueDate+', collectée le '+_options.collectDate);
        jeedom.cmd.displayDuration(_options.valueDate, $('.timeCmd#uid#'));
      
    var date = new Date(_options.valueDate);
	var format = $.datepicker.formatDate('D d M', date);
	var time = " à "+date.getHours()+":"+(date.getMinutes()<10?'0':'')+date.getMinutes();
	var valueState	= "off";
      
        if (parseInt(_options.display_value) == 1) {
        $('.cmd[data-cmd_id=#id#] .datecmd#uid#').empty().html('Arrivée:'+'<br>'+format+'<br>'+time);
		valueState = "on";
		} else if (parseInt(_options.display_value) == 0) {
        $('.cmd[data-cmd_id=#id#] .datecmd#uid#').empty().html('Départ:'+'<br>'+format+'<br>'+time);
		valueState = "off";
		} else {
        $('.cmd[data-cmd_id=#id#] .datecmd#uid#').empty().html('Mode auto:'+'<br>'+format+'<br>'+time);
		valueState = "wrn";
		}
      
    var valueQui = ('#qui#' !='#'+'qui#') ? "#qui#":"defaut";
    var iconPath = "plugins/widget/core/template/dashboard/cmd.info.binary.PresenceData/"+valueQui+"_"+valueState+".png";
    var valueTaille = is_numeric('#taille#') ? parseFloat('#taille#'):90;
      
        $('.iconCmd#uid#').empty().append('<img src="'+iconPath+'" /height='+valueTaille+'px width='+valueTaille+'px>');
    	
    	}
      	jeedom.cmd.update['#id#']({display_value:'#state#',valueDate:'#valueDate#',collectDate:'#collectDate#',alertLevel:'#alertLevel#'});
	</script>
</div>